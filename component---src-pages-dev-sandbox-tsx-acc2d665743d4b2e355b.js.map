{"version":3,"file":"component---src-pages-dev-sandbox-tsx-acc2d665743d4b2e355b.js","mappings":"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","sources":["webpack://typescriptlang-org/./src/components/SuppressWhenTouch.tsx","webpack://typescriptlang-org/./src/components/devNav.tsx","webpack://typescriptlang-org/./src/lib/isTouchDevice.ts","webpack://typescriptlang-org/./src/pages/dev/sandbox.tsx"],"sourcesContent":["import React, { useEffect } from \"react\"\nimport { isTouchDevice } from \"../lib/isTouchDevice\"\n\n/**\n * A React component which will remove its children (at runtime!)\n * from the hierarchy if we're on a touch device\n */\nexport const SuppressWhenTouch = ({ children, hideOnTouch }: any) => {\n\n  useEffect(() => {\n    if (isTouchDevice()) {\n      // It's touch, so let's kill the content in the child and \n      // replace it with a message that this section isn't good for mobile\n      const suppressible = document.getElementById(\"touch-suppressible\")!\n      while (suppressible.firstChild) {\n        suppressible.removeChild(suppressible.firstChild)\n      }\n\n      if (hideOnTouch) return\n\n      const h4 = document.createElement(\"h4\")\n      h4.textContent = \"Section best on a computer\"\n\n      const p = document.createElement(\"p\")\n      p.textContent = \"This part of the site does not run well on a touch-oriented browser. We recommend switching to a computer to carry on.\"\n\n      suppressible.appendChild(h4)\n      suppressible.appendChild(p)\n    }\n\n  }, [])\n  return (\n    <div id=\"touch-suppressible\">\n      {children}\n    </div>)\n}\n","import * as React from \"react\"\nimport { withPrefix } from \"gatsby\"\n\ninterface DevNavProps {\n  active?: string\n}\n\nexport const DevNav = (props: DevNavProps) => {\n  const isActive = (str) =>\n    props.active && props.active.toLowerCase() === str ? \"active\" : \"\"\n\n  return <nav aria-label=\"Developer tools\" className=\"navbar-sub dev-tools\">\n    <ul className=\"nav\">\n      <li className=\"name\"><h3>Developer Tools</h3></li>\n      <li style={{ display: \"none\" }}>\n        <a className={isActive(\"compiler api\")} href={withPrefix(\"/dev/compiler\")}>Compiler API</a>\n      </li>\n      <li>\n        <a className={isActive(\"sandbox\")} href={withPrefix(\"/dev/sandbox\")}>Sandbox</a>\n      </li>\n      <li>\n        <a className={isActive(\"twoslash\")} href={withPrefix(\"/dev/twoslash\")}>Twoslash</a>\n      </li>\n      <li>\n        <a className={isActive(\"typescript vfs\")} href={withPrefix(\"/dev/typescript-vfs\")}>TypeScript VFS</a>\n      </li>\n      <li>\n        <a className={isActive(\"playground plugins\")} href={withPrefix(\"/dev/playground-plugins\")}>Playground Plugins</a>\n      </li>\n      <li>\n        <a className={isActive(\"bug workbench\")} href={withPrefix(\"/dev/bug-workbench\")}>Bug Workbench</a>\n      </li>\n    </ul>\n  </nav >\n}\n","/** Based on https://developer.mozilla.org/docs/Web/HTTP/Browser_detection_using_the_user_agent */\nexport function isTouchDevice() {\n  var hasTouchScreen = false\n  if (\"maxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.maxTouchPoints > 0\n  } else if (\"msMaxTouchPoints\" in navigator) {\n    // @ts-ignore\n    hasTouchScreen = navigator.msMaxTouchPoints > 0\n  } else {\n    var mQ =\n      typeof window !== \"undefined\" &&\n      \"matchMedia\" in window &&\n      matchMedia(\"(pointer:coarse)\")\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\n      hasTouchScreen = !!mQ.matches\n    } else if (\"orientation\" in window) {\n      hasTouchScreen = true // deprecated, but good fallback\n    } else {\n      // Only as a last resort, fall back to user agent sniffing\n      // @ts-ignore\n      var UA = navigator.userAgent\n      hasTouchScreen =\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) ||\n        /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA)\n    }\n  }\n  return hasTouchScreen\n}\n","import React, { useEffect } from \"react\"\nimport { Layout } from \"../../components/layout\"\nimport { withPrefix, graphql } from \"gatsby\"\n\nimport \"./dev.scss\"\nimport { Intl } from \"../../components/Intl\"\nimport { DevNav } from \"../../components/devNav\"\nimport { isTouchDevice } from \"../../lib/isTouchDevice\"\nimport { SuppressWhenTouch } from \"../../components/SuppressWhenTouch\"\n\ntype Props = {}\n\nconst Index: React.FC<Props> = props => {\n  useEffect(() => {\n    // Don't even bother getting monaco\n    if (isTouchDevice()) {\n      return\n    }\n\n    const getLoaderScript = document.createElement(\"script\")\n    getLoaderScript.src = withPrefix(\"/js/vs.loader.js\")\n    getLoaderScript.async = true\n    getLoaderScript.onload = () => {\n      // @ts-ignore\n      const re: any = global.require\n\n      re.config({\n        paths: {\n          vs: \"https://playgroundcdn.typescriptlang.org/cdn/4.0.5/monaco/min/vs\",\n          sandbox: withPrefix(\"/js/sandbox\"),\n        },\n        ignoreDuplicateModules: [\"vs/editor/editor.main\"],\n      })\n\n      re(\n        [\n          \"vs/editor/editor.main\",\n          \"vs/language/typescript/tsWorker\",\n          \"sandbox/index\",\n        ],\n        async (\n          main: typeof import(\"monaco-editor\"),\n          ts: typeof import(\"typescript\"),\n          sandboxEnv: typeof import(\"@typescript/sandbox\")\n        ) => {\n          const initialCode = `import {markdown, danger} from \"danger\"\n\nexport default async function () {\n    // Check for new @types in devDependencies\n    const packageJSONDiff = await danger.git.JSONDiffForFile(\"package.json\")\n    const newDeps = packageJSONDiff.devDependencies.added\n    const newTypesDeps = newDeps?.filter(d => d.includes(\"@types\")) ?? []\n\n    if (newTypesDeps.length){\n        markdown(\"Added new types packages \" + newTypesDeps.join(\", \"))\n    }\n}`\n          const isOK = main && ts && sandboxEnv\n          if (isOK) {\n            document\n              .getElementById(\"loader\")!\n              .parentNode?.removeChild(document.getElementById(\"loader\")!)\n          }\n\n          document.getElementById(\"monaco-editor-embed\")!.style.display =\n            \"block\"\n\n          const sandbox = sandboxEnv.createTypeScriptSandbox(\n            {\n              text: initialCode,\n              compilerOptions: {},\n              domID: \"monaco-editor-embed\",\n              filetype: \"ts\",\n            },\n            main,\n            ts\n          )\n          sandbox.editor.focus()\n\n          setTimeout(() => {\n            document.querySelectorAll(\".html-code\").forEach(codeElement => {\n              sandbox.monaco.editor\n                .colorize(codeElement.textContent || \"\", \"html\", { tabSize: 2 })\n                .then(newHTML => {\n                  codeElement.innerHTML = newHTML\n                })\n            })\n\n            document.querySelectorAll(\".ts-code\").forEach(codeElement => {\n              sandbox.monaco.editor\n                .colorize(codeElement.textContent || \"\", \"typescript\", {\n                  tabSize: 2,\n                })\n                .then(newHTML => {\n                  codeElement.innerHTML = newHTML\n                })\n            })\n          }, 300)\n        }\n      )\n    }\n\n    document.body.appendChild(getLoaderScript)\n  }, [])\n\n  return (\n    <>\n      <Layout\n        title=\"Developers - Sandbox\"\n        description=\"The TypeScript sandbox powers the TypeScript Playground. Learn how you can make your experiences like the playground using the sandbox.\"\n        lang=\"en\"\n      >\n        <div id=\"dev\">\n          <DevNav active=\"sandbox\" />\n          <div className=\"raised content main-content-block\">\n            <div className=\"split-fivehundred\">\n              <h1 style={{ marginTop: \"20px\" }}>TypeScript Sandbox</h1>\n              <p>\n                A DOM library for interacting with TypeScript and JavaScript\n                code, which powers the heart of the{\" \"}\n                <a href={withPrefix(\"/play/\")}>TypeScript playground</a>\n              </p>\n              <p>You can use the TypeScript sandbox for:</p>\n              <ul>\n                <li>\n                  Building IDE-like experiences for people to explore your\n                  library's API\n                </li>\n                <li>\n                  Building interactive web tools which use TypeScript, with a\n                  lot of the Playgrounds developer experience for free\n                </li>\n              </ul>\n              <p>\n                For example, the sandbox to the side has grabbed the Types for{\" \"}\n                <a href=\"https://danger.systems/js/\">DangerJS</a> with no\n                modifications for this code sample. This is because the\n                Playground's Automatic Type Acquisition is enabled by default.\n                It will also look for the same parameters for code, and\n                selection indexes inside the URL.\n              </p>\n              <p>\n                Try clicking{\" \"}\n                <a href=\"?q=1#code/PTAEBUAsFMGdtAYwPYFtXQHYBdagO7QBOCiJAhttACagCWmo2MEAngA7QDKZd72oAAoAbcqwDmRZAFdM1AFAhQ5OUxiNmCAKoAlADKhI5WJALGkydnRqhkAN2JNkahJmj5QuvfMVgodPAwVPBVWUHYpACtoRAFpWAZxNk4eIj4BWBVqACNkAA84JBVfUGhjOmEw+FUUagRyKVlabGcyxFNkTSJQHxRMWAEYYWFnAF5QACIACWhh5wB1ZCJhagn5PthkYWgAOhHxAAohkYBKIA\">\n                  this URL\n                </a>{\" \"}\n                to see that in action.{\" \"}\n              </p>\n              <p>\n                This library builds on top of the{\" \"}\n                <a href=\"https://microsoft.github.io/monaco-editor/\">\n                  Monaco Editor\n                </a>\n                , providing a higher level API but offering access to all the\n                lower-level APIs via a single <code>sandbox</code> object.\n              </p>\n              <p>\n                You can find the code for the TypeScript Sandbox inside the{\" \"}\n                <a href=\"https://github.com/microsoft/TypeScript-Website/tree/v2/packages/sandbox#@typescript/sandbox\">\n                  microsoft/TypeScript-Website\n                </a>{\" \"}\n                mono-repo.\n              </p>\n            </div>\n\n            <SuppressWhenTouch hideOnTouch>\n              <div\n                className=\"fivehundred\"\n                style={{ borderLeft: \"1px solid gray\" }}\n              >\n                <div id=\"loader\">\n                  <div className=\"lds-grid\">\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                    <div></div>\n                  </div>\n                  <p id=\"loading-message\" role=\"status\">\n                    Downloading Sandbox...\n                  </p>\n                </div>\n                <div\n                  style={{ height: \"400px\", display: \"none\" }}\n                  id=\"monaco-editor-embed\"\n                />\n              </div>\n            </SuppressWhenTouch>\n          </div>\n\n          <div className=\"raised main-content-block\">\n            <h2>Usage</h2>\n            <p>\n              A sandbox uses the same tools as monaco-editor, meaning this\n              library is shipped as an AMD bundle which you can use the{\" \"}\n              <a href=\"https://github.com/microsoft/vscode-loader/\">\n                VSCode Loader\n              </a>{\" \"}\n              to <code>require</code>.\n            </p>\n            <p>\n              Because we need it for the TypeScript website, you can use our\n              hosted copy{\" \"}\n              <a\n                href=\"https://typescriptlang.org/js/vs.loader.js\"\n                title=\"Link to the JS for the visual studio require loader\"\n              >\n                here.\n              </a>\n            </p>\n\n            <h3>Get Started</h3>\n            <p>\n              Create a new file: <code>index.html</code> and paste this code\n              into that file.\n            </p>\n            <pre>\n              <code className=\"html-code\">\n                {`<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n  </head>\n  <div id=\"loader\">Loading...</div>\n  <div id=\"monaco-editor-embed\" style=\"height: 800px;\" />\n  <script>\n    // First set up the VSCode loader in a script tag\n    const getLoaderScript = document.createElement('script')\n    getLoaderScript.src = 'https://www.typescriptlang.org/js/vs.loader.js'\n    getLoaderScript.async = true\n    getLoaderScript.onload = () => {\n      // Now the loader is ready, tell require where it can get the version of monaco, and the sandbox\n      // This version uses the latest version of the sandbox, which is used on the TypeScript website\n\n      // For the monaco version you can use unpkg or the TypeSCript web infra CDN\n      // You can see the available releases for TypeScript here:\n      // https://playgroundcdn.typescriptlang.org/indexes/releases.json\n      //\n      require.config({\n        paths: {\n          vs: 'https://playgroundcdn.typescriptlang.org/cdn/4.0.5/monaco/min/vs',\n          // vs: 'https://unpkg.com/@typescript-deploys/monaco-editor@4.0.5/min/vs',\n          sandbox: 'https://www.typescriptlang.org/js/sandbox',\n        },\n        // This is something you need for monaco to work\n        ignoreDuplicateModules: ['vs/editor/editor.main'],\n      })\n\n      // Grab a copy of monaco, TypeScript and the sandbox\n      require(['vs/editor/editor.main', 'vs/language/typescript/tsWorker', 'sandbox/index'], (\n        main,\n        _tsWorker,\n        sandboxFactory\n      ) => {\n        const initialCode = \\`import {markdown, danger} from \"danger\"\n\nexport default async function () {\n    // Check for new @types in devDependencies\n    const packageJSONDiff = await danger.git.JSONDiffForFile(\"package.json\")\n    const newDeps = packageJSONDiff.devDependencies.added\n    const newTypesDeps = newDeps?.filter(d => d.includes(\"@types\")) ?? []\n    if (newTypesDeps.length){\n        markdown(\"Added new types packages \" + newTypesDeps.join(\", \"))\n    }\n}\n\\`\n\n        const isOK = main && window.ts && sandboxFactory\n        if (isOK) {\n          document.getElementById('loader').parentNode.removeChild(document.getElementById('loader'))\n        } else {\n          console.error('Could not get all the dependencies of sandbox set up!')\n          console.error('main', !!main, 'ts', !!window.ts, 'sandbox', !!sandbox)\n          return\n        }\n\n        // Create a sandbox and embed it into the div #monaco-editor-embed\n        const sandboxConfig = {\n          text: initialCode,\n          compilerOptions: {},\n          domID: 'monaco-editor-embed',\n        }\n\n        const sandbox = sandboxFactory.createTypeScriptSandbox(sandboxConfig, main, window.ts)\n        sandbox.editor.focus()\n      })\n    }\n\n    document.body.appendChild(getLoaderScript)\n  </script>\n</html>`}\n              </code>\n            </pre>\n            <p>\n              Opening the file <code>index.html</code> in a web browser will\n              load up the same sandbox up at the top of the page.\n            </p>\n            <h3>Some examples of the API</h3>\n            {codeSamples.map(code => (\n              <div className=\"split-code\" key={code.blurb}>\n                <p>{code.blurb}</p>\n                <pre>\n                  <code className=\"ts-code\">{code.code.trim()}</code>\n                </pre>\n              </div>\n            ))}\n            <p>\n              The API is mainly a light shim over the{\" \"}\n              <a href=\"https://microsoft.github.io/monaco-editor/docs.html\">\n                monaco-editor API\n              </a>{\" \"}\n              with the{\" \"}\n              <a href=\"https://github.com/microsoft/monaco-typescript\">\n                monaco-typescript API\n              </a>\n              .\n            </p>\n          </div>\n        </div>\n      </Layout>\n    </>\n  )\n}\n\nexport default (props: Props) => (\n  <Intl locale=\"en\">\n    <Index {...props} />\n  </Intl>\n)\n\nconst codeSamples = [\n  {\n    blurb: \"Converting the user's TypeScript into JavaScript\",\n    code: `const sandbox = createTypeScriptSandbox(sandboxConfig, main, ts)\n\n// Async because it needs to go  \nconst js = await sandbox.getRunnableJS()\nconsole.log(js)`,\n  },\n  {\n    blurb: \"Get the DTS for the user's editor\",\n    code: `const sandbox = createTypeScriptSandbox(sandboxConfig, main, ts)\n\nconst dts = await sandbox.getDTSForCode()\nconsole.log(dts)`,\n  },\n  {\n    blurb: \"Make a request for an LSP response\",\n    code: `const sandbox = createTypeScriptSandbox(sandboxConfig, main, ts)\n\n// A worker here is a web-worker, set up by monaco-typescript\n// which does the computation in the background \nconst worker = await sandbox.getWorkerProcess()\nconst definitions =  await client.getDefinitionAtPosition(model.uri.toString(), 6)\n  `,\n  },\n  {\n    blurb: \"Change compiler flags using a few different APIs\",\n    code: `const sandbox = createTypeScriptSandbox(sandboxConfig, main, ts)\n\n// Hook in to all changes to the compiler\nsandbox.setDidUpdateCompilerSettings((newOptions) => {\n  console.log(\"Compiler settings changed: \", newOptions)\n})\n\n// Update via key value\nsandbox.updateCompilerSetting(\"allowJs\", true)\n// Update via an object\nsandbox.updateCompilerSettings({ jsx: 0 })\n// Replace the compiler settings\nsandbox.setCompilerSettings({})\n`,\n  },\n  {\n    blurb: \"Highlight some code in the editor\",\n    code: `const sandbox = createTypeScriptSandbox(sandboxConfig, main, ts)\n\nconst start = {\n  lineNumber: 0,\n  column: 0\n}\n\nconst end = {\n  lineNumber: 0,\n  column: 4\n}\n\nconst decorations = sandbox.editor.deltaDecorations([], [\n  {\n    range: new sandbox.monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column),\n    options: { inlineClassName: 'error-highlight' },\n  },\n])\n`,\n  },\n  {\n    blurb: \"Create your own playground.\",\n    code: `const sandbox = createTypeScriptSandbox(sandboxConfig, main, ts)\n\n// Use a script to make a JSON file like:\n// { \n//   \"file:///node_modules/types/keyboard/index.d.ts\": \"export const enterKey: string\"\n// }\n//\n// Where the keys are the paths, and the values are the source-code. The sandbox\n// will use the node resolution lookup strategy by default.\n\nconst dtsFiles = {} \n\nObject.keys(dtsFiles).forEach(path => {\n  sandbox.languageServiceDefaults.addExtraLib(dts[path], path);\n});\n`,\n  },\n]\n"],"names":["SuppressWhenTouch","_ref","children","hideOnTouch","useEffect","isTouchDevice","suppressible","document","getElementById","firstChild","removeChild","h4","createElement","textContent","p","appendChild","React","id","DevNav","props","isActive","str","active","toLowerCase","className","style","display","href","withPrefix","hasTouchScreen","navigator","maxTouchPoints","msMaxTouchPoints","mQ","window","matchMedia","media","matches","UA","userAgent","test","Index","getLoaderScript","src","async","onload","re","global","require","config","paths","vs","sandbox","ignoreDuplicateModules","main","ts","sandboxEnv","_parentNode","parentNode","createTypeScriptSandbox","text","compilerOptions","domID","filetype","editor","focus","setTimeout","querySelectorAll","forEach","codeElement","monaco","colorize","tabSize","then","newHTML","innerHTML","body","Layout","title","description","lang","marginTop","borderLeft","role","height","codeSamples","map","code","key","blurb","trim","Intl","locale"],"sourceRoot":""}