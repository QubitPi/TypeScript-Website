{"componentChunkName":"component---src-templates-documentation-tsx","path":"/docs/handbook/release-notes/typescript-5-7.html","result":{"data":{"markdownRemark":{"id":"29ff7cd5-d660-5cde-b4d5-369acbdf3846","excerpt":"Checks for Never-Initialized Variables For a long time, TypeScript has been able to catch issues when a variable has not yet been initialized in all prior…","html":"<h2 id=\"checks-for-never-initialized-variables\" style=\"position:relative;\"><a href=\"#checks-for-never-initialized-variables\" aria-label=\"checks for never initialized variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Checks for Never-Initialized Variables</h2>\n<p>For a long time, TypeScript has been able to catch issues when a variable has not yet been initialized in all prior branches.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">result</span><span style=\"color: #000000\">: </span><span style=\"color: #1C6277\">number</span></div><div class='line'><span style=\"color: #AF00DB\">if</span><span style=\"color: #000000\"> (</span><span style=\"color: #795E26\">someCondition</span><span style=\"color: #000000\">()) {</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #001080\">result</span><span style=\"color: #000000\"> = </span><span style=\"color: #795E26\">doSomeWork</span><span style=\"color: #000000\">();</span></div><div class='line'><span style=\"color: #000000\">}</span></div><div class='line'><span style=\"color: #AF00DB\">else</span><span style=\"color: #000000\"> {</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">temporaryWork</span><span style=\"color: #000000\"> = </span><span style=\"color: #795E26\">doSomeWork</span><span style=\"color: #000000\">();</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #001080\">temporaryWork</span><span style=\"color: #000000\"> *= </span><span style=\"color: #098658\">2</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #008000\">// forgot to assign to 'result'</span></div><div class='line'><span style=\"color: #000000\">}</span></div><div class='line'></div><div class='line'><span style=\"color: #001080\">console</span><span style=\"color: #000000\">.</span><span style=\"color: #795E26\">log</span><span style=\"color: #000000\">(</span><span style=\"color: #001080\">result</span><span style=\"color: #000000\">); </span><span style=\"color: #008000\">// error: Variable 'result' is used before being assigned.</span></div></code></div></pre>\n<p>Unfortunately, there are some places where this analysis doesn’t work.\r\nFor example, if the variable is accessed in a separate function, the type system doesn’t know when the function will be called, and instead takes an “optimistic” view that the variable will be initialized.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">function</span><span style=\"color: #000000\"> </span><span style=\"color: #795E26\">foo</span><span style=\"color: #000000\">() {</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">result</span><span style=\"color: #000000\">: </span><span style=\"color: #1C6277\">number</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #AF00DB\">if</span><span style=\"color: #000000\"> (</span><span style=\"color: #795E26\">someCondition</span><span style=\"color: #000000\">()) {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #001080\">result</span><span style=\"color: #000000\"> = </span><span style=\"color: #795E26\">doSomeWork</span><span style=\"color: #000000\">();</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #AF00DB\">else</span><span style=\"color: #000000\"> {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">temporaryWork</span><span style=\"color: #000000\"> = </span><span style=\"color: #795E26\">doSomeWork</span><span style=\"color: #000000\">();</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #001080\">temporaryWork</span><span style=\"color: #000000\"> *= </span><span style=\"color: #098658\">2</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #008000\">// forgot to assign to 'result'</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #795E26\">printResult</span><span style=\"color: #000000\">();</span></div><div class='line'></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0000FF\">function</span><span style=\"color: #000000\"> </span><span style=\"color: #795E26\">printResult</span><span style=\"color: #000000\">() {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #001080\">console</span><span style=\"color: #000000\">.</span><span style=\"color: #795E26\">log</span><span style=\"color: #000000\">(</span><span style=\"color: #001080\">result</span><span style=\"color: #000000\">); </span><span style=\"color: #008000\">// no error here.</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>While TypeScript 5.7 is still lenient on variables that have <em>possibly</em> been initialized, the type system is able to report errors when variables have <em>never</em> been initialized at all.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">function</span><span style=\"color: #000000\"> </span><span style=\"color: #795E26\">foo</span><span style=\"color: #000000\">() {</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">result</span><span style=\"color: #000000\">: </span><span style=\"color: #1C6277\">number</span></div><div class='line'><span style=\"color: #000000\">    </span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #008000\">// do work, but forget to assign to 'result'</span></div><div class='line'></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0000FF\">function</span><span style=\"color: #000000\"> </span><span style=\"color: #795E26\">printResult</span><span style=\"color: #000000\">() {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #001080\">console</span><span style=\"color: #000000\">.</span><span style=\"color: #795E26\">log</span><span style=\"color: #000000\">(</span><span style=\"color: #001080\">result</span><span style=\"color: #000000\">); </span><span style=\"color: #008000\">// error: Variable 'result' is used before being assigned.</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p><a href=\"https://github.com/microsoft/TypeScript/pull/55887\">This change</a> was contributed thanks to the work of GitHub user <a href=\"https://github.com/Zzzen\">Zzzen</a>!</p>\n<h2 id=\"path-rewriting-for-relative-paths\" style=\"position:relative;\"><a href=\"#path-rewriting-for-relative-paths\" aria-label=\"path rewriting for relative paths permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Path Rewriting for Relative Paths</h2>\n<p>There are several tools and runtimes that allow you to run TypeScript code “in-place”, meaning they do not require a build step which generates output JavaScript files.\r\nFor example, ts-node, tsx, Deno, and Bun all support running <code>.ts</code> files directly.\r\nMore recently, Node.js has been investigating such support with <code>--experimental-strip-types</code> (soon to be unflagged!) and  <code>--experimental-transform-types</code>.\r\nThis is extremely convenient because it allows us to iterate faster without worrying about re-running a build task.</p>\n<p>There is some complexity to be aware of when using these modes though.\r\nTo be maximally compatible with all these tools, a TypeScript file that’s imported “in-place” <strong>must</strong> be imported with the appropriate TypeScript extension at runtime.\r\nFor example, to import a file called <code>foo.ts</code>, we have to write the following in Node’s new experimental support:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// main.ts</span></div><div class='line'></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">foo</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./foo.ts\"</span><span style=\"color: #000000\">; </span><span style=\"color: #008000\">// &lt;- we need foo.ts here, not foo.js</span></div></code></div></pre>\n<p>Typically, TypeScript would issue an error if we did this, because it expects us to import <em>the output file</em>.\r\nBecause some tools do allow <code>.ts</code> imports, TypeScript has supported this import style with an option called <code>--allowImportingTsExtensions</code> for a while now.\r\nThis works fine, but what happens if we need to actually generate <code>.js</code> files out of these <code>.ts</code> files?\r\nThis is a requirement for library authors who will need to be able to distribute just <code>.js</code> files, but up until now TypeScript has avoided rewriting any paths.</p>\n<p>To support this scenario, we’ve added a new compiler option called <code>--rewriteRelativeImportExtensions</code>.\r\nWhen an import path is <em>relative</em> (starts with <code>./</code> or <code>../</code>), ends in a TypeScript extension (<code>.ts</code>, <code>.tsx</code>, <code>.mts</code>, <code>.cts</code>), and is a non-declaration file, the compiler will rewrite the path to the corresponding JavaScript extension (<code>.js</code>, <code>.jsx</code>, <code>.mjs</code>, <code>.cjs</code>).</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// Under --rewriteRelativeImportExtensions...</span></div><div class='line'></div><div class='line'><span style=\"color: #008000\">// these will be rewritten.</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">foo</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./foo.ts\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">bar</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"../someFolder/bar.mts\"</span><span style=\"color: #000000\">;</span></div><div class='line'></div><div class='line'><span style=\"color: #008000\">// these will NOT be rewritten in any way.</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">a</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./foo\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">b</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"some-package/file.ts\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">c</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"@some-scope/some-package/file.ts\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">d</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"#/file.ts\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">e</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./file.js\"</span><span style=\"color: #000000\">;</span></div></code></div></pre>\n<p>This allows us to write TypeScript code that can be run in-place and then compiled into JavaScript when we’re ready.</p>\n<p>Now, we noted that TypeScript generally avoided rewriting paths.\r\nThere are several reasons for this, but the most obvious one is dynamic imports.\r\nIf a developer writes the following, it’s not trivial to handle the path that <code>import</code> receives.\r\nIn fact, it’s impossible to override the behavior of <code>import</code> within any dependencies.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">function</span><span style=\"color: #000000\"> </span><span style=\"color: #795E26\">getPath</span><span style=\"color: #000000\">() {</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #AF00DB\">if</span><span style=\"color: #000000\"> (</span><span style=\"color: #1C6277\">Math</span><span style=\"color: #000000\">.</span><span style=\"color: #795E26\">random</span><span style=\"color: #000000\">() &lt; </span><span style=\"color: #098658\">0.5</span><span style=\"color: #000000\">) {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #AF00DB\">return</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./foo.ts\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #AF00DB\">else</span><span style=\"color: #000000\"> {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #AF00DB\">return</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./foo.js\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">}</span></div><div class='line'></div><div class='line'><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">myImport</span><span style=\"color: #000000\"> = </span><span style=\"color: #AF00DB\">await</span><span style=\"color: #000000\"> </span><span style=\"color: #795E26\">import</span><span style=\"color: #000000\">(</span><span style=\"color: #795E26\">getPath</span><span style=\"color: #000000\">());</span></div></code></div></pre>\n<p>Another issue is that (as we saw above) only <em>relative</em> paths are rewritten, and they are written “naively”.\r\nThis means that any path that relies on TypeScript’s <code>baseUrl</code> and <code>paths</code> will not get rewritten:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">json</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// tsconfig.json</span></div><div class='line'></div><div class='line'><span style=\"color: #000000\">{</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"compilerOptions\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0451A5\">\"module\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"nodenext\"</span><span style=\"color: #000000\">,</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #008000\">// ...</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0451A5\">\"paths\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">            </span><span style=\"color: #0451A5\">\"@/*\"</span><span style=\"color: #000000\">: [</span><span style=\"color: #A31515\">\"./src/*\"</span><span style=\"color: #000000\">]</span></div><div class='line'><span style=\"color: #000000\">        }</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// Won't be transformed, won't work.</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">utilities</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"@/utilities.ts\"</span><span style=\"color: #000000\">;</span></div></code></div></pre>\n<p>Nor will any path that might resolve through the <a href=\"https://nodejs.org/api/packages.html#exports\"><code>exports</code></a> and <a href=\"https://nodejs.org/api/packages.html#imports\"><code>imports</code></a> fields of a <code>package.json</code>.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">json</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// package.json</span></div><div class='line'><span style=\"color: #000000\">{</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"name\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"my-package\"</span><span style=\"color: #000000\">,</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"imports\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0451A5\">\"#root/*\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./dist/*\"</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// Won't be transformed, won't work.</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">utilities</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"#root/utilities.ts\"</span><span style=\"color: #000000\">;</span></div></code></div></pre>\n<p>As a result, if you’ve been using a workspace-style layout with multiple packages referencing each other, you might need to use <a href=\"https://nodejs.org/api/packages.html#conditional-exports\">conditional exports</a> with <a href=\"https://nodejs.org/api/packages.html#resolving-user-conditions\">scoped custom conditions</a> to make this work:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">json</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// my-package/package.json</span></div><div class='line'></div><div class='line'><span style=\"color: #000000\">{</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"name\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"my-package\"</span><span style=\"color: #000000\">,</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"exports\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0451A5\">\".\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">            </span><span style=\"color: #0451A5\">\"@my-package/development\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./src/index.ts\"</span><span style=\"color: #000000\">,</span></div><div class='line'><span style=\"color: #000000\">            </span><span style=\"color: #0451A5\">\"import\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./lib/index.js\"</span></div><div class='line'><span style=\"color: #000000\">        },</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0451A5\">\"./*\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">            </span><span style=\"color: #0451A5\">\"@my-package/development\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./src/*.ts\"</span><span style=\"color: #000000\">,</span></div><div class='line'><span style=\"color: #000000\">            </span><span style=\"color: #0451A5\">\"import\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./lib/*.js\"</span></div><div class='line'><span style=\"color: #000000\">        }</span></div><div class='line'><span style=\"color: #000000\">    }</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>Any time you want to import the <code>.ts</code> files, you can run it with <code>node --conditions=@my-package/development</code>.</p>\n<p>Note the “namespace” or “scope” we used for the condition <code>@my-package/development</code>.\r\nThis is a bit of a makeshift solution to avoid conflicts from dependencies that might also use the <code>development</code> condition.\r\nIf everyone ships a <code>development</code> in their package, then resolution may try to resolve to a <code>.ts</code> file which will not necessarily work.\r\nThis idea is similar to what’s described in Colin McDonnell’s essay <em><a href=\"https://colinhacks.com/essays/live-types-typescript-monorepo#:~:text=custom%20conditions\">Live types in a TypeScript monorepo</a></em>, along with <a href=\"https://github.com/isaacs/tshy#loading-from-source\">tshy’s guidance for loading from source</a>.</p>\n<p>For more specifics on how this feature works, <a href=\"https://github.com/microsoft/TypeScript/pull/59767\">read up on the change here</a>.</p>\n<h2 id=\"support-for---target-es2024-and---lib-es2024\" style=\"position:relative;\"><a href=\"#support-for---target-es2024-and---lib-es2024\" aria-label=\"support for   target es2024 and   lib es2024 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Support for <code>--target es2024</code> and <code>--lib es2024</code></h2>\n<p>TypeScript 5.7 now supports <code>--target es2024</code>, which allows users to target ECMAScript 2024 runtimes.\r\nThis target primarily enables specifying the new <code>--lib es2024</code> which contains many features for <code>SharedArrayBuffer</code> and <code>ArrayBuffer</code>, <code>Object.groupBy</code>, <code>Map.groupBy</code>, <code>Promise.withResolvers</code>, and more.\r\nIt also moves <code>Atomics.waitAsync</code> from <code>--lib es2022</code> to <code>--lib es2024</code>.</p>\n<p>Note that as part of the changes to <code>SharedArrayBuffer</code> and <code>ArrayBuffer</code>, the two now diverge a bit.\r\nTo bridge the gap and preserve the underlying buffer type, all <code>TypedArrays</code> (like <code>Uint8Array</code> and others) <a href=\"https://github.com/microsoft/TypeScript/pull/59417\">are now also generic</a>.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">interface</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">Uint8Array</span><span style=\"color: #000000\">&lt;</span><span style=\"color: #1C6277\">TArrayBuffer</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">extends</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">ArrayBufferLike</span><span style=\"color: #000000\"> = </span><span style=\"color: #1C6277\">ArrayBufferLike</span><span style=\"color: #000000\">&gt; {</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #008000\">// ...</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>Each <code>TypedArray</code> now contains a type parameter named <code>TArrayBuffer</code>, though that type parameter has a default type argument so that we can continue to refer to <code>Int32Array</code> without explicitly writing out <code>Int32Array&#x3C;ArrayBufferLike></code>.</p>\n<p>If you encounter any issues as part of this update, you may need to update <code>@types/node</code>.</p>\n<p><a href=\"https://github.com/microsoft/TypeScript/pull/58573\">This work</a> was primarily provided thanks to <a href=\"https://github.com/petamoriken\">Kenta Moriuchi</a>!</p>\n<h2 id=\"searching-ancestor-configuration-files-for-project-ownership\" style=\"position:relative;\"><a href=\"#searching-ancestor-configuration-files-for-project-ownership\" aria-label=\"searching ancestor configuration files for project ownership permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Searching Ancestor Configuration Files for Project Ownership</h2>\n<p>When a TypeScript file is loaded in an editor using TSServer (like Visual Studio or VS Code), the editor will try to find the relevant <code>tsconfig.json</code> file that “owns” the file.\r\nTo do this, it walks up the directory tree from the file being edited, looking for any file named <code>tsconfig.json</code>.</p>\n<p>Previously, this search would stop at the first <code>tsconfig.json</code> file found;\r\nhowever, imagine a project structure like the following:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: undefined\">project/</span></div><div class='line'><span style=\"color: undefined\">├── src/</span></div><div class='line'><span style=\"color: undefined\">│   ├── foo.ts</span></div><div class='line'><span style=\"color: undefined\">│   ├── foo-test.ts</span></div><div class='line'><span style=\"color: undefined\">│   ├── tsconfig.json</span></div><div class='line'><span style=\"color: undefined\">│   └── tsconfig.test.json</span></div><div class='line'><span style=\"color: undefined\">└── tsconfig.json</span></div></code></div></pre>\n<p>Here, the idea is that <code>src/tsconfig.json</code> is the “main” configuration file for the project, and <code>src/tsconfig.test.json</code> is a configuration file for running tests.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">json</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// src/tsconfig.json</span></div><div class='line'><span style=\"color: #000000\">{</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"compilerOptions\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0451A5\">\"outDir\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"../dist\"</span></div><div class='line'><span style=\"color: #000000\">    },</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"exclude\"</span><span style=\"color: #000000\">: [</span><span style=\"color: #A31515\">\"**/*.test.ts\"</span><span style=\"color: #000000\">]</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">json</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// src/tsconfig.test.json</span></div><div class='line'><span style=\"color: #000000\">{</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"compilerOptions\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #0451A5\">\"outDir\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"../dist/test\"</span></div><div class='line'><span style=\"color: #000000\">    },</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"include\"</span><span style=\"color: #000000\">: [</span><span style=\"color: #A31515\">\"**/*.test.ts\"</span><span style=\"color: #000000\">],</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"references\"</span><span style=\"color: #000000\">: [</span></div><div class='line'><span style=\"color: #000000\">        { </span><span style=\"color: #0451A5\">\"path\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./tsconfig.json\"</span><span style=\"color: #000000\"> }</span></div><div class='line'><span style=\"color: #000000\">    ]</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">json</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// tsconfig.json</span></div><div class='line'><span style=\"color: #000000\">{</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #008000\">// This is a \"workspace-style\" or \"solution-style\" tsconfig.</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #008000\">// Instead of specifying any files, it just references all the actual projects.</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"files\"</span><span style=\"color: #000000\">: [],</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"references\"</span><span style=\"color: #000000\">: [</span></div><div class='line'><span style=\"color: #000000\">        { </span><span style=\"color: #0451A5\">\"path\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./src/tsconfig.json\"</span><span style=\"color: #000000\"> },</span></div><div class='line'><span style=\"color: #000000\">        { </span><span style=\"color: #0451A5\">\"path\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"./src/tsconfig.test.json\"</span><span style=\"color: #000000\"> },</span></div><div class='line'><span style=\"color: #000000\">    ]</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>The problem here is that when editing <code>foo-test.ts</code>, the editor would find <code>project/src/tsconfig.json</code> as the “owning” configuration file - but that’s not the one we want!\r\nIf the walk stops at this point, that might not be desirable.\r\nThe only way to avoid this previously was to rename <code>src/tsconfig.json</code> to something like <code>src/tsconfig.src.json</code>, and then all files would hit the top-level <code>tsconfig.json</code> which references every possible project.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: undefined\">project/</span></div><div class='line'><span style=\"color: undefined\">├── src/</span></div><div class='line'><span style=\"color: undefined\">│   ├── foo.ts</span></div><div class='line'><span style=\"color: undefined\">│   ├── foo-test.ts</span></div><div class='line'><span style=\"color: undefined\">│   ├── tsconfig.src.json</span></div><div class='line'><span style=\"color: undefined\">│   └── tsconfig.test.json</span></div><div class='line'><span style=\"color: undefined\">└── tsconfig.json</span></div></code></div></pre>\n<p>Instead of forcing developers to do this, TypeScript 5.7 now continues walking up the directory tree to find other appropriate <code>tsconfig.json</code> files for editor scenarios.\r\nThis can provide more flexibility in how projects are organized and how configuration files are structured.</p>\n<p>You can get more specifics on the implementation on GitHub <a href=\"https://github.com/microsoft/TypeScript/pull/57196\">here</a> and <a href=\"https://github.com/microsoft/TypeScript/pull/59688\">here</a>.</p>\n<h2 id=\"faster-project-ownership-checks-in-editors-for-composite-projects\" style=\"position:relative;\"><a href=\"#faster-project-ownership-checks-in-editors-for-composite-projects\" aria-label=\"faster project ownership checks in editors for composite projects permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Faster Project Ownership Checks in Editors for Composite Projects</h2>\n<p>Imagine a large codebase with the following structure:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: undefined\">packages</span></div><div class='line'><span style=\"color: undefined\">├── graphics/</span></div><div class='line'><span style=\"color: undefined\">│   ├── tsconfig.json</span></div><div class='line'><span style=\"color: undefined\">│   └── src/</span></div><div class='line'><span style=\"color: undefined\">│       └── ...</span></div><div class='line'><span style=\"color: undefined\">├── sound/</span></div><div class='line'><span style=\"color: undefined\">│   ├── tsconfig.json</span></div><div class='line'><span style=\"color: undefined\">│   └── src/</span></div><div class='line'><span style=\"color: undefined\">│       └── ...</span></div><div class='line'><span style=\"color: undefined\">├── networking/</span></div><div class='line'><span style=\"color: undefined\">│   ├── tsconfig.json</span></div><div class='line'><span style=\"color: undefined\">│   └── src/</span></div><div class='line'><span style=\"color: undefined\">│       └── ...</span></div><div class='line'><span style=\"color: undefined\">├── input/</span></div><div class='line'><span style=\"color: undefined\">│   ├── tsconfig.json</span></div><div class='line'><span style=\"color: undefined\">│   └── src/</span></div><div class='line'><span style=\"color: undefined\">│       └── ...</span></div><div class='line'><span style=\"color: undefined\">└── app/</span></div><div class='line'><span style=\"color: undefined\">    ├── tsconfig.json</span></div><div class='line'><span style=\"color: undefined\">    ├── some-script.js</span></div><div class='line'><span style=\"color: undefined\">    └── src/</span></div><div class='line'><span style=\"color: undefined\">        └── ...</span></div></code></div></pre>\n<p>Each directory in <code>packages</code> is a separate TypeScript project, and the <code>app</code> directory is the main project that depends on all the other projects.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">json</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// app/tsconfig.json</span></div><div class='line'><span style=\"color: #000000\">{</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"compilerOptions\"</span><span style=\"color: #000000\">: {</span></div><div class='line'><span style=\"color: #000000\">        </span><span style=\"color: #008000\">// ...</span></div><div class='line'><span style=\"color: #000000\">    },</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"include\"</span><span style=\"color: #000000\">: [</span><span style=\"color: #A31515\">\"src\"</span><span style=\"color: #000000\">],</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #0451A5\">\"references\"</span><span style=\"color: #000000\">: [</span></div><div class='line'><span style=\"color: #000000\">        { </span><span style=\"color: #0451A5\">\"path\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"../graphics/tsconfig.json\"</span><span style=\"color: #000000\"> },</span></div><div class='line'><span style=\"color: #000000\">        { </span><span style=\"color: #0451A5\">\"path\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"../sound/tsconfig.json\"</span><span style=\"color: #000000\"> },</span></div><div class='line'><span style=\"color: #000000\">        { </span><span style=\"color: #0451A5\">\"path\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"../networking/tsconfig.json\"</span><span style=\"color: #000000\"> },</span></div><div class='line'><span style=\"color: #000000\">        { </span><span style=\"color: #0451A5\">\"path\"</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"../input/tsconfig.json\"</span><span style=\"color: #000000\"> }</span></div><div class='line'><span style=\"color: #000000\">    ]</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>Now notice we have the file <code>some-script.js</code> in the <code>app</code> directory.\r\nWhen we open <code>some-script.js</code> in the editor, the TypeScript language service (which also handles the editor experience for JavaScript files!) has to figure out which project the file belongs to so it can apply the right settings.</p>\n<p>In this case, the nearest <code>tsconfig.json</code> does <em>not</em> include <code>some-script.js</code>, but TypeScript will proceed to ask “could one of the projects <em>referenced</em> by <code>app/tsconfig.json</code> include <code>some-script.js</code>?“.\r\nTo do so, TypeScript would previously load up each project, one-by-one, and stop as soon as it found a project which contained <code>some-script.js</code>.\r\nEven if <code>some-script.js</code> isn’t included in the root set of files, TypeScript would still parse all the files within a project because some of the root set of files can still <em>transitively</em> reference <code>some-script.js</code>.</p>\n<p>What we found over time was that this behavior caused extreme and unpredictable behavior in larger codebases.\r\nDevelopers would open up stray script files and find themselves waiting for their entire codebase to be opened up.</p>\n<p>Thankfully, every project that can be referenced by another (non-workspace) project must enable a flag called <code>composite</code>, which enforces a rule that all input source files must be known up-front.\r\nSo when probing a <code>composite</code> project, TypeScript 5.7 will only check if a file belongs to the <em>root set of files</em> of that project.\r\nThis should avoid this common worst-case behavior.</p>\n<p>For more information, <a href=\"https://github.com/microsoft/TypeScript/pull/59688\">see the change here</a>.</p>\n<h3 id=\"validated-json-imports-in---module-nodenext\" style=\"position:relative;\"><a href=\"#validated-json-imports-in---module-nodenext\" aria-label=\"validated json imports in   module nodenext permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Validated JSON Imports in <code>--module nodenext</code></h3>\n<p>When importing from a <code>.json</code> file under <code>--module nodenext</code>, TypeScript will now enforce certain rules to prevent runtime errors.</p>\n<p>For one, an import attribute containing <code>type: \"json\"</code> needs to be present for any JSON file import.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">myConfig</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./myConfig.json\"</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #008000\">//                   ~~~~~~~~~~~~~~~~~</span></div><div class='line'><span style=\"color: #008000\">// ❌ error: Importing a JSON file into an ECMAScript module requires a 'type: \"json\"' import attribute when 'module' is set to 'NodeNext'.</span></div><div class='line'></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">myConfig</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./myConfig.json\"</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">with</span><span style=\"color: #000000\"> { </span><span style=\"color: #001080\">type</span><span style=\"color: #000000\">: \"</span><span style=\"color: #001080\">json</span><span style=\"color: #000000\">\" };</span></div><div class='line'><span style=\"color: #008000\">//                                          ^^^^^^^^^^^^^^^^</span></div><div class='line'><span style=\"color: #008000\">// ✅ This is fine because we provided `type: \"json\"`</span></div></code></div></pre>\n<p>On top of this validation, TypeScript will not generate “named” exports, and the contents of a JSON import will only be accessible via a default.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #008000\">// ✅ This is okay:</span></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">myConfigA</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./myConfig.json\"</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">with</span><span style=\"color: #000000\"> { </span><span style=\"color: #001080\">type</span><span style=\"color: #000000\">: \"</span><span style=\"color: #001080\">json</span><span style=\"color: #000000\">\" };</span></div><div class='line'><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">version</span><span style=\"color: #000000\"> = </span><span style=\"color: #001080\">myConfigA</span><span style=\"color: #000000\">.</span><span style=\"color: #001080\">version</span><span style=\"color: #000000\">;</span></div><div class='line'></div><div class='line'><span style=\"color: #008000\">///////////</span></div><div class='line'></div><div class='line'><span style=\"color: #AF00DB\">import</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">*</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">as</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">myConfigB</span><span style=\"color: #000000\"> </span><span style=\"color: #AF00DB\">from</span><span style=\"color: #000000\"> </span><span style=\"color: #A31515\">\"./myConfig.json\"</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">with</span><span style=\"color: #000000\"> { </span><span style=\"color: #001080\">type</span><span style=\"color: #000000\">: \"</span><span style=\"color: #001080\">json</span><span style=\"color: #000000\">\" };</span></div><div class='line'></div><div class='line'><span style=\"color: #008000\">// ❌ This is not:</span></div><div class='line'><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">version</span><span style=\"color: #000000\"> = </span><span style=\"color: #001080\">myConfig</span><span style=\"color: #000000\">.</span><span style=\"color: #001080\">version</span><span style=\"color: #000000\">;</span></div><div class='line'></div><div class='line'><span style=\"color: #008000\">// ✅ This is okay:</span></div><div class='line'><span style=\"color: #0000FF\">let</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">version</span><span style=\"color: #000000\"> = </span><span style=\"color: #001080\">myConfig</span><span style=\"color: #000000\">.</span><span style=\"color: #001080\">default</span><span style=\"color: #000000\">.</span><span style=\"color: #001080\">version</span><span style=\"color: #000000\">;</span></div></code></div></pre>\n<p><a href=\"https://github.com/microsoft/TypeScript/pull/60019\">See here</a> for more information on this change.</p>\n<h2 id=\"support-for-v8-compile-caching-in-nodejs\" style=\"position:relative;\"><a href=\"#support-for-v8-compile-caching-in-nodejs\" aria-label=\"support for v8 compile caching in nodejs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Support for V8 Compile Caching in Node.js</h2>\n<p>Node.js 22 supports <a href=\"https://github.com/nodejs/node/pull/54501\">a new API called <code>module.enableCompileCache()</code></a>.\r\nThis API allows the runtime to reuse some of the parsing and compilation work done after the first run of a tool.</p>\n<p>TypeScript 5.7 now leverages the API so that it can start doing useful work sooner.\r\nIn some of our own testing, we’ve witnessed about a 2.5x speed-up in running <code>tsc --version</code>.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: undefined\">Benchmark 1: node ./built/local/_tsc.js --version (*without* caching)</span></div><div class='line'><span style=\"color: undefined\">  Time (mean ± σ):     122.2 ms ±   1.5 ms    [User: 101.7 ms, System: 13.0 ms]</span></div><div class='line'><span style=\"color: undefined\">  Range (min … max):   119.3 ms … 132.3 ms    200 runs</span></div><div class='line'><span style=\"color: undefined\"> </span></div><div class='line'><span style=\"color: undefined\">Benchmark 2: node ./built/local/tsc.js --version  (*with* caching)</span></div><div class='line'><span style=\"color: undefined\">  Time (mean ± σ):      48.4 ms ±   1.0 ms    [User: 34.0 ms, System: 11.1 ms]</span></div><div class='line'><span style=\"color: undefined\">  Range (min … max):    45.7 ms …  52.8 ms    200 runs</span></div><div class='line'><span style=\"color: undefined\"> </span></div><div class='line'><span style=\"color: undefined\">Summary</span></div><div class='line'><span style=\"color: undefined\">  node ./built/local/tsc.js --version ran</span></div><div class='line'><span style=\"color: undefined\">    2.52 ± 0.06 times faster than node ./built/local/_tsc.js --version</span></div></code></div></pre>\n<p>For more information, <a href=\"https://github.com/microsoft/TypeScript/pull/59720\">see the pull request here</a>.</p>\n<h2 id=\"notable-behavioral-changes\" style=\"position:relative;\"><a href=\"#notable-behavioral-changes\" aria-label=\"notable behavioral changes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Notable Behavioral Changes</h2>\n<p>This section highlights a set of noteworthy changes that should be acknowledged and understood as part of any upgrade.\r\nSometimes it will highlight deprecations, removals, and new restrictions.\r\nIt can also contain bug fixes that are functionally improvements, but which can also affect an existing build by introducing new errors.</p>\n<h3 id=\"libdts\" style=\"position:relative;\"><a href=\"#libdts\" aria-label=\"libdts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>lib.d.ts</code></h3>\n<p>Types generated for the DOM may have an impact on type-checking your codebase.\r\nFor more information, <a href=\"https://github.com/microsoft/TypeScript/pull/60061\">see linked issues related to DOM and <code>lib.d.ts</code> updates for this version of TypeScript</a>.</p>\n<h3 id=\"typedarrays-are-now-generic-over-arraybufferlike\" style=\"position:relative;\"><a href=\"#typedarrays-are-now-generic-over-arraybufferlike\" aria-label=\"typedarrays are now generic over arraybufferlike permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>TypedArray</code>s Are Now Generic Over <code>ArrayBufferLike</code></h3>\n<p>In ECMAScript 2024, <code>SharedArrayBuffer</code> and <code>ArrayBuffer</code> have types that slightly diverge.\r\nTo bridge the gap and preserve the underlying buffer type, all <code>TypedArrays</code> (like <code>Uint8Array</code> and others) <a href=\"https://github.com/microsoft/TypeScript/pull/59417\">are now also generic</a>.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">interface</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">Uint8Array</span><span style=\"color: #000000\">&lt;</span><span style=\"color: #1C6277\">TArrayBuffer</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">extends</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">ArrayBufferLike</span><span style=\"color: #000000\"> = </span><span style=\"color: #1C6277\">ArrayBufferLike</span><span style=\"color: #000000\">&gt; {</span></div><div class='line'><span style=\"color: #000000\">    </span><span style=\"color: #008000\">// ...</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>Each <code>TypedArray</code> now contains a type parameter named <code>TArrayBuffer</code>, though that type parameter has a default type argument so that users can continue to refer to <code>Int32Array</code> without explicitly writing out <code>Int32Array&#x3C;ArrayBufferLike></code>.</p>\n<p>If you encounter any issues as part of this update, such as</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: undefined\">error TS2322: Type 'Buffer' is not assignable to type 'Uint8Array&lt;ArrayBufferLike&gt;'.</span></div><div class='line'><span style=\"color: undefined\">error TS2345: Argument of type 'Buffer' is not assignable to parameter of type 'Uint8Array&lt;ArrayBufferLike&gt;'.</span></div><div class='line'><span style=\"color: undefined\">error TS2345: Argument of type 'ArrayBufferLike' is not assignable to parameter of type 'ArrayBuffer'.</span></div><div class='line'><span style=\"color: undefined\">error TS2345: Argument of type 'Buffer' is not assignable to parameter of type 'string | ArrayBufferView | Stream | Iterable&lt;string | ArrayBufferView&gt; | AsyncIterable&lt;string | ArrayBufferView&gt;'.</span></div></code></div></pre>\n<p>then you may need to update <code>@types/node</code>.</p>\n<p>You can read the <a href=\"https://github.com/microsoft/TypeScript/pull/59417\">specifics about this change on GitHub</a>.</p>\n<h3 id=\"creating-index-signatures-from-non-literal-method-names-in-classes\" style=\"position:relative;\"><a href=\"#creating-index-signatures-from-non-literal-method-names-in-classes\" aria-label=\"creating index signatures from non literal method names in classes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating Index Signatures from Non-Literal Method Names in Classes</h3>\n<p>TypeScript now has a more consistent behavior for methods in classes when they are declared with non-literal computed property names.\r\nFor example, in the following:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">declare</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">const</span><span style=\"color: #000000\"> </span><span style=\"color: #0070C1\">symbolMethodName</span><span style=\"color: #000000\">: </span><span style=\"color: #1C6277\">symbol</span><span style=\"color: #000000\">;</span></div><div class='line'></div><div class='line'><span style=\"color: #AF00DB\">export</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">class</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">A</span><span style=\"color: #000000\"> {</span></div><div class='line'><span style=\"color: #000000\">    [</span><span style=\"color: #001080\">symbolMethodName</span><span style=\"color: #000000\">]() { </span><span style=\"color: #AF00DB\">return</span><span style=\"color: #000000\"> </span><span style=\"color: #098658\">1</span><span style=\"color: #000000\"> };</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>Previously TypeScript just viewed the class in a way like the following:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #AF00DB\">export</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">class</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">A</span><span style=\"color: #000000\"> {</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>In other words, from the type system’s perspective, <code>[symbolMethodName]</code> contributed nothing to the type of <code>A</code></p>\n<p>TypeScript 5.7 now views the method <code>[symbolMethodName]() {}</code> more meaningfully, and generates an index signature.\r\nAs a result, the code above is interpreted as something like the following code:</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #AF00DB\">export</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">class</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">A</span><span style=\"color: #000000\"> {</span></div><div class='line'><span style=\"color: #000000\">    [</span><span style=\"color: #001080\">x</span><span style=\"color: #000000\">: </span><span style=\"color: #1C6277\">symbol</span><span style=\"color: #000000\">]: () </span><span style=\"color: #0000FF\">=&gt;</span><span style=\"color: #000000\"> </span><span style=\"color: #1C6277\">number</span><span style=\"color: #000000\">;</span></div><div class='line'><span style=\"color: #000000\">}</span></div></code></div></pre>\n<p>This provides behavior that is consistent with properties and methods in object literals.</p>\n<p><a href=\"https://github.com/microsoft/TypeScript/pull/59860\">Read up more on this change here</a>.</p>\n<h3 id=\"more-implicit-any-errors-on-functions-returning-null-and-undefined\" style=\"position:relative;\"><a href=\"#more-implicit-any-errors-on-functions-returning-null-and-undefined\" aria-label=\"more implicit any errors on functions returning null and undefined permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>More Implicit <code>any</code> Errors on Functions Returning <code>null</code> and <code>undefined</code></h3>\n<p>When a function expression is contextually typed by a signature returning a generic type, TypeScript now appropriately provides an implicit <code>any</code> error under <code>noImplicitAny</code>, but outside of <code>strictNullChecks</code>.</p>\n<pre class=\"shiki light-plus\" style=\"background-color: #FFFFFF; color: #000000\"><div class=\"language-id\">ts</div><div class='code-container' tabindex='0'><code><div class='line'><span style=\"color: #0000FF\">declare</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">var</span><span style=\"color: #000000\"> </span><span style=\"color: #001080\">p</span><span style=\"color: #000000\">: </span><span style=\"color: #1C6277\">Promise</span><span style=\"color: #000000\">&lt;</span><span style=\"color: #1C6277\">number</span><span style=\"color: #000000\">&gt;;</span></div><div class='line'><span style=\"color: #0000FF\">const</span><span style=\"color: #000000\"> </span><span style=\"color: #0070C1\">p2</span><span style=\"color: #000000\"> = </span><span style=\"color: #001080\">p</span><span style=\"color: #000000\">.</span><span style=\"color: #795E26\">catch</span><span style=\"color: #000000\">(() </span><span style=\"color: #0000FF\">=&gt;</span><span style=\"color: #000000\"> </span><span style=\"color: #0000FF\">null</span><span style=\"color: #000000\">);</span></div><div class='line'><span style=\"color: #008000\">//                 ~~~~~~~~~~</span></div><div class='line'><span style=\"color: #008000\">// error TS7011: Function expression, which lacks return-type annotation, implicitly has an 'any' return type.</span></div></code></div></pre>\n<p><a href=\"https://github.com/microsoft/TypeScript/pull/59661\">See this change for more details</a>.</p>","headings":[{"value":"Checks for Never-Initialized Variables","depth":2},{"value":"Path Rewriting for Relative Paths","depth":2},{"value":"Support for --target es2024 and --lib es2024","depth":2},{"value":"Searching Ancestor Configuration Files for Project Ownership","depth":2},{"value":"Faster Project Ownership Checks in Editors for Composite Projects","depth":2},{"value":"Validated JSON Imports in --module nodenext","depth":3},{"value":"Support for V8 Compile Caching in Node.js","depth":2},{"value":"Notable Behavioral Changes","depth":2},{"value":"lib.d.ts","depth":3},{"value":"TypedArrays Are Now Generic Over ArrayBufferLike","depth":3},{"value":"Creating Index Signatures from Non-Literal Method Names in Classes","depth":3},{"value":"More Implicit any Errors on Functions Returning null and undefined","depth":3}],"frontmatter":{"permalink":"/docs/handbook/release-notes/typescript-5-7.html","title":"TypeScript 5.7","disable_toc":null,"handbook":null,"oneline":"TypeScript 5.7 Release Notes","preamble":null,"deprecated_by":null,"deprecation_redirects":null,"experimental":null}},"prev":null,"next":null},"pageContext":{"id":"5-typescript-5.7","slug":"/docs/handbook/release-notes/typescript-5-7.html","repoPath":"/packages/documentation/copy/en/release-notes/TypeScript 5.7.md","previousID":null,"nextID":null,"lang":"en","modifiedTime":"2025-05-14T08:25:13.748Z"}},"staticQueryHashes":[],"slicesMap":{}}